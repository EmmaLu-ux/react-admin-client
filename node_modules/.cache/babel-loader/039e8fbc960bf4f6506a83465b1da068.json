{"ast":null,"code":"import\"antd/es/button/style\";import _Button from\"antd/es/button\";import\"antd/es/form/style\";import _Form from\"antd/es/form\";import\"antd/es/input/style\";import _Input from\"antd/es/input\";import\"antd/es/icon/style\";import _Icon from\"antd/es/icon\";import _classCallCheck from\"/Users/emmalu/Documents/fronted/workspace/react-admin_client-1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/emmalu/Documents/fronted/workspace/react-admin_client-1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/emmalu/Documents/fronted/workspace/react-admin_client-1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/emmalu/Documents/fronted/workspace/react-admin_client-1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import\"./login.less\";import\"./login-1.less\";/* import { reqLogin } from \"../../api\";\nimport memoryUtils from '../../utils/memoryUtils'\nimport storageUtils from \"../../utils/storageUtils\"; */import{Redirect}from\"react-router-dom\";import{login}from\"../../redux/actions\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.handleSubmit=function(event){event.preventDefault();/* const form = this.props.form;\n    const values = form.getFieldsValue();\n    console.log('@@', values) */_this.props.form.validateFields(function(err,values){if(!err){/* console.log(\"提交登录的ajax请求: \", values);\n        请求登录 */var username=values.username,password=values.password;/* const result = await reqLogin(username, password); //{status: 0, data: user}  {status: 1, data: msg}\n        // const result = response.data;\n        console.log(\"请求成功了\", result);\n        if (result.status === 0) {\n          //提示登录成功\n          console.log(\"登录成功！\");\n          message.success('登录成功！')\n\n          //获取到user，并存储到内存中\n          const user = result.data\n          memoryUtils.user = user //保存在内存中\n          storageUtils.saveUser(user) //保存到local中去\n          //跳转到管理界面\n          this.props.history.push(\"/home\");\n        } else {\n          message.error(result.msg);\n        } */ //调用分发异步action的函数 => 发登录的异步请求，有了结果后更新状态\n_this.props.login(username,password);}else{console.log(\"校验不通过！\");}});};return _this;}_createClass(Login,[{key:\"render\",value:function render(){//如果用户已经登陆, 自动跳转到管理界面\n// const user = memoryUtils.user\nvar user=this.props.user;if(user&&user._id){return/*#__PURE__*/React.createElement(Redirect,{to:\"/home\"});}// const errorMsg = this.props.user.errorMsg;\nvar form=this.props.form;var getFieldDecorator=form.getFieldDecorator;return/*#__PURE__*/React.createElement(\"div\",{className:\"login\"},/*#__PURE__*/React.createElement(\"section\",{className:\"login-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"login-Image\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"login-Info\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u6B22\\u8FCE\\u767B\\u5F55\"),/*#__PURE__*/React.createElement(_Form,{onSubmit:this.handleSubmit,className:\"login-form\"},/*#__PURE__*/React.createElement(_Form.Item,null,getFieldDecorator(\"username\",{rules:[{required:true,whitespace:false,message:\"请输入您的用户名!\"},{min:4,message:\"用户名至少4位!\"},{max:12,message:\"用户名最多12位!\"},{pattern:/^[a-zA-Z0-9_]+$/,message:\"用户名必须是字母、数字或下划线!\"}]})(/*#__PURE__*/React.createElement(_Input,{prefix:/*#__PURE__*/React.createElement(_Icon,{type:\"user\",style:{color:\"rgba(0,0,0,.5)\"}}),size:\"large\",allowClear:true,placeholder:\"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\",className:\"login-form-input\"}))),/*#__PURE__*/React.createElement(_Form.Item,null,getFieldDecorator(\"password\",{rules:[{required:true,whitespace:false,message:\"请输入您的用户名!\"},{min:4,message:\"用户名至少4位!\"},{max:12,message:\"用户名最多12位!\"},{pattern:/^[a-zA-Z0-9_]+$/,message:\"用户名必须是字母、数字或下划线!\"}]})(/*#__PURE__*/React.createElement(_Input,{prefix:/*#__PURE__*/React.createElement(_Icon,{type:\"lock\",style:{color:\"rgba(0,0,0,.5)\"}}),size:\"large\",allowClear:true,type:\"password\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\",className:\"login-form-input\"}))),/*#__PURE__*/React.createElement(_Form.Item,null,/*#__PURE__*/React.createElement(_Button,{type:\"primary\",size:\"large\",htmlType:\"submit\",className:\"login-form-button\"},\"\\u767B\\u5F55\"))))));}}]);return Login;}(Component);var WrapLogin=_Form.create()(Login);export default connect(function(state){return{user:state.user};},{login:login})(WrapLogin);","map":{"version":3,"names":["React","Component","connect","Redirect","login","Login","handleSubmit","event","preventDefault","props","form","validateFields","err","values","username","password","console","log","user","_id","getFieldDecorator","rules","required","whitespace","message","min","max","pattern","color","WrapLogin","create","state"],"sources":["/Users/emmalu/Documents/fronted/workspace/react-admin_client-1/src/pages/login/login.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport { Form, Icon, Input, Button } from \"antd\";\nimport { connect } from \"react-redux\";\n\nimport \"./login.less\";\nimport \"./login-1.less\"\n/* import { reqLogin } from \"../../api\";\nimport memoryUtils from '../../utils/memoryUtils'\nimport storageUtils from \"../../utils/storageUtils\"; */\nimport { Redirect } from \"react-router-dom\";\nimport { login } from \"../../redux/actions\";\n\nclass Login extends Component {\n  handleSubmit = (event) => {\n    event.preventDefault();\n    /* const form = this.props.form;\n    const values = form.getFieldsValue();\n    console.log('@@', values) */\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        /* console.log(\"提交登录的ajax请求: \", values);\n        请求登录 */\n        const { username, password } = values;\n        /* const result = await reqLogin(username, password); //{status: 0, data: user}  {status: 1, data: msg}\n        // const result = response.data;\n        console.log(\"请求成功了\", result);\n        if (result.status === 0) {\n          //提示登录成功\n          console.log(\"登录成功！\");\n          message.success('登录成功！')\n\n          //获取到user，并存储到内存中\n          const user = result.data\n          memoryUtils.user = user //保存在内存中\n          storageUtils.saveUser(user) //保存到local中去\n          //跳转到管理界面\n          this.props.history.push(\"/home\");\n        } else {\n          message.error(result.msg);\n        } */\n        //调用分发异步action的函数 => 发登录的异步请求，有了结果后更新状态\n        this.props.login(username, password);\n      } else {\n        console.log(\"校验不通过！\");\n      }\n    });\n  };\n  render() {\n    //如果用户已经登陆, 自动跳转到管理界面\n    // const user = memoryUtils.user\n    const user = this.props.user;\n    if (user && user._id) {\n      return <Redirect to=\"/home\" />;\n    }\n    // const errorMsg = this.props.user.errorMsg;\n    const form = this.props.form;\n    const { getFieldDecorator } = form;\n    return (\n      <div className=\"login\">\n        <section className=\"login-content\">\n          <div className=\"login-Image\"></div>\n          <div className=\"login-Info\">\n            <h2>欢迎登录</h2>\n            <Form onSubmit={this.handleSubmit} className=\"login-form\">\n              <Form.Item>\n                { getFieldDecorator(\"username\", {\n                  rules: [\n                    {\n                      required: true,\n                      whitespace: false,\n                      message: \"请输入您的用户名!\",\n                    },\n                    { min: 4, message: \"用户名至少4位!\" },\n                    { max: 12, message: \"用户名最多12位!\" },\n                    {\n                      pattern: /^[a-zA-Z0-9_]+$/,\n                      message: \"用户名必须是字母、数字或下划线!\",\n                    },\n                  ],\n                })(\n                  <Input\n                    prefix={\n                      <Icon type=\"user\" style={{ color: \"rgba(0,0,0,.5)\" }} />\n                    }\n                    size=\"large\"\n                    allowClear={true}\n                    placeholder=\"请输入用户名\"\n                    className=\"login-form-input\"\n                  />\n                )}\n              </Form.Item>\n              <Form.Item>\n                {getFieldDecorator(\"password\", {\n                  rules: [\n                    {\n                      required: true,\n                      whitespace: false,\n                      message: \"请输入您的用户名!\",\n                    },\n                    { min: 4, message: \"用户名至少4位!\" },\n                    { max: 12, message: \"用户名最多12位!\" },\n                    {\n                      pattern: /^[a-zA-Z0-9_]+$/,\n                      message: \"用户名必须是字母、数字或下划线!\",\n                    },\n                  ],\n                })(\n                  <Input\n                    prefix={\n                      <Icon type=\"lock\" style={{ color: \"rgba(0,0,0,.5)\" }} />\n                    }\n                    size=\"large\"\n                    allowClear={true}\n                    type=\"password\"\n                    placeholder=\"请输入密码\"\n                    className=\"login-form-input\"\n                  />\n                )}\n              </Form.Item>\n              <Form.Item>\n                <Button\n                  type=\"primary\"\n                  size=\"large\"\n                  htmlType=\"submit\"\n                  className=\"login-form-button\"\n                >\n                  登录\n                </Button>\n              </Form.Item>\n            </Form>\n          </div>\n        </section>\n      </div>\n    );\n  }\n}\n\nconst WrapLogin = Form.create()(Login);\nexport default connect((state) => ({ user: state.user }), { login })(WrapLogin);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}