{"ast":null,"code":"import \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/icon/style\";\nimport _Icon from \"antd/es/icon\";\nvar _jsxFileName = \"/Users/emmalu/Documents/fronted/workspace/react-admin_client-1/src/pages/login/login.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./login.less\";\nimport \"./login-1.less\";\n/* import { reqLogin } from \"../../api\";\nimport memoryUtils from '../../utils/memoryUtils'\nimport storageUtils from \"../../utils/storageUtils\"; */\nimport { Redirect } from \"react-router-dom\";\nimport { login } from \"../../redux/actions\";\nclass Login extends Component {\n  constructor() {\n    super(...arguments);\n    this.handleSubmit = event => {\n      event.preventDefault();\n      /* const form = this.props.form;\n      const values = form.getFieldsValue();\n      console.log('@@', values) */\n      this.props.form.validateFields((err, values) => {\n        if (!err) {\n          /* console.log(\"提交登录的ajax请求: \", values);\n          请求登录 */\n          const {\n            username,\n            password\n          } = values;\n          /* const result = await reqLogin(username, password); //{status: 0, data: user}  {status: 1, data: msg}\n          // const result = response.data;\n          console.log(\"请求成功了\", result);\n          if (result.status === 0) {\n            //提示登录成功\n            console.log(\"登录成功！\");\n            message.success('登录成功！')\n             //获取到user，并存储到内存中\n            const user = result.data\n            memoryUtils.user = user //保存在内存中\n            storageUtils.saveUser(user) //保存到local中去\n            //跳转到管理界面\n            this.props.history.push(\"/home\");\n          } else {\n            message.error(result.msg);\n          } */\n          //调用分发异步action的函数 => 发登录的异步请求，有了结果后更新状态\n          this.props.login(username, password);\n        } else {\n          console.log(\"校验不通过！\");\n        }\n      });\n    };\n  }\n  render() {\n    //如果用户已经登陆, 自动跳转到管理界面\n    // const user = memoryUtils.user\n    const user = this.props.user;\n    if (user && user._id) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/home\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 14\n        }\n      });\n    }\n    // const errorMsg = this.props.user.errorMsg;\n    const form = this.props.form;\n    const {\n      getFieldDecorator\n    } = form;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"login-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-Image\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-Info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }\n    }, \"\\u6B22\\u8FCE\\u767B\\u5F55\"), /*#__PURE__*/React.createElement(_Form, {\n      onSubmit: this.handleSubmit,\n      className: \"login-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(_Form.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 15\n      }\n    }, getFieldDecorator(\"username\", {\n      rules: [{\n        required: true,\n        whitespace: false,\n        message: \"请输入您的用户名!\"\n      }, {\n        min: 4,\n        message: \"用户名至少4位!\"\n      }, {\n        max: 12,\n        message: \"用户名最多12位!\"\n      }, {\n        pattern: /^[a-zA-Z0-9_]+$/,\n        message: \"用户名必须是字母、数字或下划线!\"\n      }]\n    })( /*#__PURE__*/React.createElement(_Input, {\n      prefix: /*#__PURE__*/React.createElement(_Icon, {\n        type: \"user\",\n        style: {\n          color: \"rgba(0,0,0,.5)\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 23\n        }\n      }),\n      size: \"large\",\n      allowClear: true,\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\",\n      className: \"login-form-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(_Form.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 15\n      }\n    }, getFieldDecorator(\"password\", {\n      rules: [{\n        required: true,\n        whitespace: false,\n        message: \"请输入您的用户名!\"\n      }, {\n        min: 4,\n        message: \"用户名至少4位!\"\n      }, {\n        max: 12,\n        message: \"用户名最多12位!\"\n      }, {\n        pattern: /^[a-zA-Z0-9_]+$/,\n        message: \"用户名必须是字母、数字或下划线!\"\n      }]\n    })( /*#__PURE__*/React.createElement(_Input, {\n      prefix: /*#__PURE__*/React.createElement(_Icon, {\n        type: \"lock\",\n        style: {\n          color: \"rgba(0,0,0,.5)\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 23\n        }\n      }),\n      size: \"large\",\n      allowClear: true,\n      type: \"password\",\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\",\n      className: \"login-form-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(_Form.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      size: \"large\",\n      htmlType: \"submit\",\n      className: \"login-form-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }, \"\\u767B\\u5F55\"))))));\n  }\n}\nconst WrapLogin = _Form.create()(Login);\nexport default connect(state => ({\n  user: state.user\n}), {\n  login\n})(WrapLogin);","map":{"version":3,"names":["React","Component","connect","Redirect","login","Login","handleSubmit","event","preventDefault","props","form","validateFields","err","values","username","password","console","log","render","user","_id","getFieldDecorator","rules","required","whitespace","message","min","max","pattern","color","WrapLogin","create","state"],"sources":["/Users/emmalu/Documents/fronted/workspace/react-admin_client-1/src/pages/login/login.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport { Form, Icon, Input, Button } from \"antd\";\nimport { connect } from \"react-redux\";\n\nimport \"./login.less\";\nimport \"./login-1.less\"\n/* import { reqLogin } from \"../../api\";\nimport memoryUtils from '../../utils/memoryUtils'\nimport storageUtils from \"../../utils/storageUtils\"; */\nimport { Redirect } from \"react-router-dom\";\nimport { login } from \"../../redux/actions\";\n\nclass Login extends Component {\n  handleSubmit = (event) => {\n    event.preventDefault();\n    /* const form = this.props.form;\n    const values = form.getFieldsValue();\n    console.log('@@', values) */\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        /* console.log(\"提交登录的ajax请求: \", values);\n        请求登录 */\n        const { username, password } = values;\n        /* const result = await reqLogin(username, password); //{status: 0, data: user}  {status: 1, data: msg}\n        // const result = response.data;\n        console.log(\"请求成功了\", result);\n        if (result.status === 0) {\n          //提示登录成功\n          console.log(\"登录成功！\");\n          message.success('登录成功！')\n\n          //获取到user，并存储到内存中\n          const user = result.data\n          memoryUtils.user = user //保存在内存中\n          storageUtils.saveUser(user) //保存到local中去\n          //跳转到管理界面\n          this.props.history.push(\"/home\");\n        } else {\n          message.error(result.msg);\n        } */\n        //调用分发异步action的函数 => 发登录的异步请求，有了结果后更新状态\n        this.props.login(username, password);\n      } else {\n        console.log(\"校验不通过！\");\n      }\n    });\n  };\n  render() {\n    //如果用户已经登陆, 自动跳转到管理界面\n    // const user = memoryUtils.user\n    const user = this.props.user;\n    if (user && user._id) {\n      return <Redirect to=\"/home\" />;\n    }\n    // const errorMsg = this.props.user.errorMsg;\n    const form = this.props.form;\n    const { getFieldDecorator } = form;\n    return (\n      <div className=\"login\">\n        <section className=\"login-content\">\n          <div className=\"login-Image\"></div>\n          <div className=\"login-Info\">\n            <h2>欢迎登录</h2>\n            <Form onSubmit={this.handleSubmit} className=\"login-form\">\n              <Form.Item>\n                { getFieldDecorator(\"username\", {\n                  rules: [\n                    {\n                      required: true,\n                      whitespace: false,\n                      message: \"请输入您的用户名!\",\n                    },\n                    { min: 4, message: \"用户名至少4位!\" },\n                    { max: 12, message: \"用户名最多12位!\" },\n                    {\n                      pattern: /^[a-zA-Z0-9_]+$/,\n                      message: \"用户名必须是字母、数字或下划线!\",\n                    },\n                  ],\n                })(\n                  <Input\n                    prefix={\n                      <Icon type=\"user\" style={{ color: \"rgba(0,0,0,.5)\" }} />\n                    }\n                    size=\"large\"\n                    allowClear={true}\n                    placeholder=\"请输入用户名\"\n                    className=\"login-form-input\"\n                  />\n                )}\n              </Form.Item>\n              <Form.Item>\n                {getFieldDecorator(\"password\", {\n                  rules: [\n                    {\n                      required: true,\n                      whitespace: false,\n                      message: \"请输入您的用户名!\",\n                    },\n                    { min: 4, message: \"用户名至少4位!\" },\n                    { max: 12, message: \"用户名最多12位!\" },\n                    {\n                      pattern: /^[a-zA-Z0-9_]+$/,\n                      message: \"用户名必须是字母、数字或下划线!\",\n                    },\n                  ],\n                })(\n                  <Input\n                    prefix={\n                      <Icon type=\"lock\" style={{ color: \"rgba(0,0,0,.5)\" }} />\n                    }\n                    size=\"large\"\n                    allowClear={true}\n                    type=\"password\"\n                    placeholder=\"请输入密码\"\n                    className=\"login-form-input\"\n                  />\n                )}\n              </Form.Item>\n              <Form.Item>\n                <Button\n                  type=\"primary\"\n                  size=\"large\"\n                  htmlType=\"submit\"\n                  className=\"login-form-button\"\n                >\n                  登录\n                </Button>\n              </Form.Item>\n            </Form>\n          </div>\n        </section>\n      </div>\n    );\n  }\n}\n\nconst WrapLogin = Form.create()(Login);\nexport default connect((state) => ({ user: state.user }), { login })(WrapLogin);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}