{"ast":null,"code":"import \"antd/es/card/style\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/list/style\";\nimport _List from \"antd/es/list\";\nimport \"antd/es/icon/style\";\nimport _Icon from \"antd/es/icon\";\nvar _jsxFileName = \"/Users/emmalu/Documents/fronted/workspace/react-admin_client-1/src/pages/product/detail.jsx\";\nimport React, { Component } from \"react\";\nimport LinkButton from \"../../components/link-button\";\nimport { BASE_IMG_URL } from \"../../utils/constants\";\nimport { reqACategory } from \"../../api/index\";\nimport memoryUtils from \"../../utils/memoryUtils\";\nimport storageUtils from \"../../utils/storageUtils\";\n\n/* Product的详情页 */\nexport default class ProductDetail extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      cName1: \"\",\n      //一级分类名称\n      cName2: \"\" //二级分类名称\n    };\n    this.getCategoryName = async () => {\n      //得到当前商品的分类ID\n      const {\n        pCategoryId,\n        categoryId\n      } = memoryUtils.product;\n      if (pCategoryId === \"0\") {\n        //一级分类下的商品\n        const result = await reqACategory(categoryId);\n        console.log(\"result\", result);\n        const cName1 = result.data.name;\n        // this.setState({ cName1 });\n        storageUtils.saveCName1();\n      } else {\n        //二级分类下的产品\n        /* 通过多个await方式发送多个请求：后面一个请求是在前面一个请求成功返回之后才发送请求\n        const result1 = await reqACategory(pCategoryId);\n        const result2 = await reqACategory(categoryId);\n        const cName1 = result1.data.name;\n        const cName2 = result2.data.name;\n        this.setState({\n          cName1,\n          cName2,\n        }); */\n        const results = await Promise.all([reqACategory(pCategoryId), reqACategory(categoryId)]);\n        const cName1 = results[0].data.name;\n        const cName2 = results[1].data.name;\n        this.setState({\n          cName1,\n          cName2\n        });\n      }\n    };\n  }\n  componentDidMount() {\n    this.getCategoryName();\n  }\n  componentWillUnmount() {\n    memoryUtils.product = {};\n  }\n  render() {\n    const {\n      name,\n      desc,\n      price,\n      detail,\n      imgs\n    } = storageUtils.getProduct();\n    const {\n      cName1,\n      cName2\n    } = this.state;\n    const title = /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(LinkButton, {\n      onClick: () => this.props.history.goBack(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(_Icon, {\n      type: \"arrow-left\",\n      style: {\n        marginRight: 15,\n        fontSize: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    }, \"\\u5546\\u54C1\\u8BE6\\u60C5\"));\n    return /*#__PURE__*/React.createElement(_Card, {\n      title: title,\n      className: \"product-detail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(_List, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(_List.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }\n    }, \"\\u5546\\u54C1\\u540D\\u79F0: \"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }\n    }, name)), /*#__PURE__*/React.createElement(_List.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }\n    }, \"\\u5546\\u54C1\\u63CF\\u8FF0: \"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, desc)), /*#__PURE__*/React.createElement(_List.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }, \"\\u5546\\u54C1\\u4EF7\\u683C: \"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }, price)), /*#__PURE__*/React.createElement(_List.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }, \"\\u6240\\u5C5E\\u5206\\u7C7B: \"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }, cName1 + (cName2 ? \"-->\" + cName2 : \"\"))), /*#__PURE__*/React.createElement(_List.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }, \"\\u5546\\u54C1\\u56FE\\u7247: \"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }\n    }, imgs && imgs.map(img => /*#__PURE__*/React.createElement(\"img\", {\n      key: img,\n      className: \"product-img\",\n      src: BASE_IMG_URL + img,\n      alt: \"img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(_List.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }\n    }, \"\\u5546\\u54C1\\u8BE6\\u60C5: \"), /*#__PURE__*/React.createElement(\"span\", {\n      dangerouslySetInnerHTML: {\n        __html: detail\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }\n    }))));\n  }\n}","map":{"version":3,"names":["React","Component","LinkButton","BASE_IMG_URL","reqACategory","memoryUtils","storageUtils","ProductDetail","state","cName1","cName2","getCategoryName","pCategoryId","categoryId","product","result","console","log","data","name","saveCName1","results","Promise","all","setState","componentDidMount","componentWillUnmount","render","desc","price","detail","imgs","getProduct","title","props","history","goBack","marginRight","fontSize","map","img","__html"],"sources":["/Users/emmalu/Documents/fronted/workspace/react-admin_client-1/src/pages/product/detail.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport { Card, List, Icon } from \"antd\";\n\nimport LinkButton from \"../../components/link-button\";\nimport { BASE_IMG_URL } from \"../../utils/constants\";\nimport { reqACategory } from \"../../api/index\";\nimport memoryUtils from \"../../utils/memoryUtils\";\nimport storageUtils from \"../../utils/storageUtils\";\n\n/* Product的详情页 */\nexport default class ProductDetail extends Component {\n  state = {\n    cName1: \"\", //一级分类名称\n    cName2: \"\", //二级分类名称\n  };\n  /*memoryUtils文件中的products结构如下： \n  {\n    \"status\": 1,\n    \"imgs\": [\n        \"华硕.webp\"\n    ],\n    \"_id\": \"6354f6c85853d86c8239581c\", // 此商品的id\n    \"categoryId\": \"6354f6b65853d86c8239581b\", // 二级分类id\n    \"pCategoryId\": \"6354f4895853d86c82395808\", // 一级分类id\n    \"name\": \"联想ThinkPad 翼4809\",\n    \"desc\": \"年度重量级新品，X390、T490全新登场 更加轻薄机身设计9\",\n    \"price\": 65999,\n    \"detail\": \"<p>想你所需，超你所想！精致外观，轻薄便携带光驱，内置正版office杜绝盗版死机，全国联保两年！ 222\\\\n</p>\\n<p>联想（Lenovo）扬天V110 15.6英寸家用轻薄便携商务办公手提笔记本电脑 定制【E2-9010/4G/128G固态】 2G独显 内置\\\\n</p>\\n<p>99999\\\\n</p>\\n\",\n    \"__v\": 0\n}\n  */\n  getCategoryName = async () => {\n    //得到当前商品的分类ID\n    const { pCategoryId, categoryId } = memoryUtils.product\n    if (pCategoryId === \"0\") {\n      //一级分类下的商品\n      const result = await reqACategory(categoryId);\n      console.log(\"result\", result); \n      const cName1 = result.data.name;\n      // this.setState({ cName1 });\n      storageUtils.saveCName1()\n    } else {\n      //二级分类下的产品\n      /* 通过多个await方式发送多个请求：后面一个请求是在前面一个请求成功返回之后才发送请求\n      const result1 = await reqACategory(pCategoryId);\n      const result2 = await reqACategory(categoryId);\n      const cName1 = result1.data.name;\n      const cName2 = result2.data.name;\n      this.setState({\n        cName1,\n        cName2,\n      }); */\n      const results = await Promise.all([\n        reqACategory(pCategoryId),\n        reqACategory(categoryId),\n      ]);\n      const cName1 = results[0].data.name;\n      const cName2 = results[1].data.name;\n      this.setState({\n        cName1,\n        cName2,\n      });\n    }\n  };\n  componentDidMount() {\n    this.getCategoryName();\n  }\n  componentWillUnmount(){\n    memoryUtils.product = {}\n  }\n  render() {\n    const { name, desc, price, detail, imgs } = storageUtils.getProduct()\n    const { cName1, cName2 } = this.state;\n    const title = (\n      <span>\n        <LinkButton onClick={() => this.props.history.goBack()}>\n          <Icon type=\"arrow-left\" style={{ marginRight: 15, fontSize: 20 }} />\n          {/* <span className=\"iconfont icon-0-55\" style={{ marginBottom: 0, fontSize: 30 }}></span> */}\n        </LinkButton>\n        <span>商品详情</span>\n      </span>\n    );\n    return (\n      <Card title={title} className=\"product-detail\">\n        <List>\n          <List.Item>\n            <span className=\"left\">商品名称: </span>\n            <span>{name}</span>\n          </List.Item>\n          <List.Item>\n            <span className=\"left\">商品描述: </span>\n            <span>{desc}</span>\n          </List.Item>\n          <List.Item>\n            <span className=\"left\">商品价格: </span>\n            <span>{price}</span>\n          </List.Item>\n          <List.Item>\n            <span className=\"left\">所属分类: </span>\n            <span>\n              {cName1 + (cName2 ? \"-->\" + cName2 : \"\")}\n            </span>\n          </List.Item>\n          <List.Item>\n            <span className=\"left\">商品图片: </span>\n            <span>\n              {imgs && imgs.map(img => (\n                <img\n                  key={img}\n                  className=\"product-img\"\n                  src={BASE_IMG_URL + img}\n                  alt=\"img\"\n                />\n              ))}\n            </span>\n          </List.Item>\n          <List.Item>\n            <span className=\"left\">商品详情: </span>\n            <span\n              dangerouslySetInnerHTML={{\n                __html: detail,\n              }}\n            ></span>\n          </List.Item>\n        </List>\n      </Card>\n    );\n  }\n}\n"],"mappings":";;;;;;;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AAGxC,OAAOC,UAAU,MAAM,8BAA8B;AACrD,SAASC,YAAY,QAAQ,uBAAuB;AACpD,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,OAAOC,WAAW,MAAM,yBAAyB;AACjD,OAAOC,YAAY,MAAM,0BAA0B;;AAEnD;AACA,eAAe,MAAMC,aAAa,SAASN,SAAS,CAAC;EAAA;IAAA;IAAA,KACnDO,KAAK,GAAG;MACNC,MAAM,EAAE,EAAE;MAAE;MACZC,MAAM,EAAE,EAAE,CAAE;IACd,CAAC;IAAA,KAiBDC,eAAe,GAAG,YAAY;MAC5B;MACA,MAAM;QAAEC,WAAW;QAAEC;MAAW,CAAC,GAAGR,WAAW,CAACS,OAAO;MACvD,IAAIF,WAAW,KAAK,GAAG,EAAE;QACvB;QACA,MAAMG,MAAM,GAAG,MAAMX,YAAY,CAACS,UAAU,CAAC;QAC7CG,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEF,MAAM,CAAC;QAC7B,MAAMN,MAAM,GAAGM,MAAM,CAACG,IAAI,CAACC,IAAI;QAC/B;QACAb,YAAY,CAACc,UAAU,EAAE;MAC3B,CAAC,MAAM;QACL;QACA;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;QACM,MAAMC,OAAO,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CAChCnB,YAAY,CAACQ,WAAW,CAAC,EACzBR,YAAY,CAACS,UAAU,CAAC,CACzB,CAAC;QACF,MAAMJ,MAAM,GAAGY,OAAO,CAAC,CAAC,CAAC,CAACH,IAAI,CAACC,IAAI;QACnC,MAAMT,MAAM,GAAGW,OAAO,CAAC,CAAC,CAAC,CAACH,IAAI,CAACC,IAAI;QACnC,IAAI,CAACK,QAAQ,CAAC;UACZf,MAAM;UACNC;QACF,CAAC,CAAC;MACJ;IACF,CAAC;EAAA;EACDe,iBAAiB,GAAG;IAClB,IAAI,CAACd,eAAe,EAAE;EACxB;EACAe,oBAAoB,GAAE;IACpBrB,WAAW,CAACS,OAAO,GAAG,CAAC,CAAC;EAC1B;EACAa,MAAM,GAAG;IACP,MAAM;MAAER,IAAI;MAAES,IAAI;MAAEC,KAAK;MAAEC,MAAM;MAAEC;IAAK,CAAC,GAAGzB,YAAY,CAAC0B,UAAU,EAAE;IACrE,MAAM;MAAEvB,MAAM;MAAEC;IAAO,CAAC,GAAG,IAAI,CAACF,KAAK;IACrC,MAAMyB,KAAK,gBACT;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACE,oBAAC,UAAU;MAAC,OAAO,EAAE,MAAM,IAAI,CAACC,KAAK,CAACC,OAAO,CAACC,MAAM,EAAG;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACrD;MAAM,IAAI,EAAC,YAAY;MAAC,KAAK,EAAE;QAAEC,WAAW,EAAE,EAAE;QAAEC,QAAQ,EAAE;MAAG,CAAE;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAAG,CAEzD,eACb;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,8BAAiB,CAEpB;IACD,oBACE;MAAM,KAAK,EAAEL,KAAM;MAAC,SAAS,EAAC,gBAAgB;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBAC5C;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACE,0BAAM,IAAI;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACR;MAAM,SAAS,EAAC,MAAM;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gCAAc,eACpC;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAOd,IAAI,CAAQ,CACT,eACZ,0BAAM,IAAI;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACR;MAAM,SAAS,EAAC,MAAM;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gCAAc,eACpC;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAOS,IAAI,CAAQ,CACT,eACZ,0BAAM,IAAI;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACR;MAAM,SAAS,EAAC,MAAM;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gCAAc,eACpC;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAOC,KAAK,CAAQ,CACV,eACZ,0BAAM,IAAI;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACR;MAAM,SAAS,EAAC,MAAM;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gCAAc,eACpC;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACGpB,MAAM,IAAIC,MAAM,GAAG,KAAK,GAAGA,MAAM,GAAG,EAAE,CAAC,CACnC,CACG,eACZ,0BAAM,IAAI;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACR;MAAM,SAAS,EAAC,MAAM;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gCAAc,eACpC;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GACGqB,IAAI,IAAIA,IAAI,CAACQ,GAAG,CAACC,GAAG,iBACnB;MACE,GAAG,EAAEA,GAAI;MACT,SAAS,EAAC,aAAa;MACvB,GAAG,EAAErC,YAAY,GAAGqC,GAAI;MACxB,GAAG,EAAC,KAAK;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAEZ,CAAC,CACG,CACG,eACZ,0BAAM,IAAI;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACR;MAAM,SAAS,EAAC,MAAM;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gCAAc,eACpC;MACE,uBAAuB,EAAE;QACvBC,MAAM,EAAEX;MACV,CAAE;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EACI,CACE,CACP,CACF;EAEX;AACF"},"metadata":{},"sourceType":"module"}