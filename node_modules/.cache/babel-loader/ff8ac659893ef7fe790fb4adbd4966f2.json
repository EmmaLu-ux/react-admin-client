{"ast":null,"code":"import\"antd/es/message/style\";import _message from\"antd/es/message\";import _defineProperty from\"/Users/emmalu/Documents/fronted/workspace/react-admin_client-1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import ajax from\"./ajax\";import jsonp from'jsonp';var BASE='/api';//用户登录\nexport var reqLogin=function reqLogin(username,password){return ajax(BASE+'/login',{username:username,password:password},'POST');};//获取一级/二级分类的列表\nexport var reqGetCategorys=function reqGetCategorys(parentId){return ajax(BASE+'/manage/category/list',{parentId:parentId});};//添加分类\nexport var reqAddCategory=function reqAddCategory(parentId,categoryName){return ajax(BASE+'/manage/category/add',{parentId:parentId,categoryName:categoryName},'POST');};//更新分类\nexport var reqUpdateCategory=function reqUpdateCategory(categoryId,categoryName){return ajax(BASE+'/manage/category/update',{categoryId:categoryId,categoryName:categoryName},'POST');};//获取商品分页列表\nexport var reqProduct=function reqProduct(pageNum,pageSize){return ajax(BASE+'/manage/product/list',{pageNum:pageNum,pageSize:pageSize});};//搜索商品分页列表(根据商品名称/描述)\n/* searchType: 搜索的类型：productName/productDesc\nsearchName: 搜索的关键字\n*/export var reqSearchProduct=function reqSearchProduct(_ref){var pageNum=_ref.pageNum,pageSize=_ref.pageSize,searchName=_ref.searchName,searchType=_ref.searchType;return ajax(BASE+'/manage/product/search',_defineProperty({pageNum:pageNum,pageSize:pageSize},searchType,searchName));};//获取一个分类\nexport var reqACategory=function reqACategory(categoryId){return ajax(BASE+'/manage/category/info',{categoryId:categoryId});};//更新商品的状态(上架/下架)\nexport var reqUpdateProduct=function reqUpdateProduct(productId,status){return ajax(BASE+'/manage/product/updateStatus',{productId:productId,status:status},'POST');};//删除图片\nexport var reqDeleteImg=function reqDeleteImg(name){return ajax(BASE+'/manage/img/delete',{name:name},'POST');};//添加/更新商品\nexport var reqAddOrUpdateProduct=function reqAddOrUpdateProduct(product){return ajax(BASE+'/manage/product/'+(product._id?'update':'add'),product,'POST');};// //更新商品\n// export const reqUpdateAProduct = (product) => ajax('/manage/product/update', product, 'POST')\n//获取所有角色列表\nexport var reqRoles=function reqRoles(){return ajax(BASE+'/manage/role/list');};//添加角色\nexport var reqAddRole=function reqAddRole(roleName){return ajax(BASE+'/manage/role/add',{roleName:roleName},'POST');};//更新角色\nexport var reqUpdateRole=function reqUpdateRole(role){return ajax(BASE+'/manage/role/update',role,'POST');};//获取用户列表\nexport var reqUsers=function reqUsers(){return ajax(BASE+'/manage/user/list');};//删除用户\nexport var reqDeleteUser=function reqDeleteUser(userId){return ajax(BASE+'/manage/user/delete',{userId:userId},'POST');};// 添加/更新用户\nexport var reqAddOrUpdateUser=function reqAddOrUpdateUser(user){return ajax(BASE+'/manage/user/'+(user._id?'update':'add'),user,\"POST\");};// 获取天气\nexport var reqWeather=function reqWeather(city){return new Promise(function(resolve,reject){// const url = `http://api.map.baidu.com/telematics/v3/weather?location=${city}&output=json&ak=3p4 9MVra6urFRGOT9s8UBWr2`\nvar url=\"https://restapi.amap.com/v3/weather/weatherInfo?city=\".concat(city,\"&key=65e76fc0f42384fc309cc50221644787\");console.log('url');// debugger\njsonp(url,{param:'callback'},function(err,data){console.log(data);if(!err&&data.status===\"1\"){var _data$lives$=data.lives[0],weather=_data$lives$.weather,winddirection=_data$lives$.winddirection,windpower=_data$lives$.windpower,humidity=_data$lives$.humidity;console.log('text:',weather);resolve({weather:weather,winddirection:winddirection,windpower:windpower,humidity:humidity});}else{_message.error('获取天气信息失败!');}});});};// reqWeather('北京')","map":{"version":3,"names":["ajax","jsonp","BASE","reqLogin","username","password","reqGetCategorys","parentId","reqAddCategory","categoryName","reqUpdateCategory","categoryId","reqProduct","pageNum","pageSize","reqSearchProduct","searchName","searchType","reqACategory","reqUpdateProduct","productId","status","reqDeleteImg","name","reqAddOrUpdateProduct","product","_id","reqRoles","reqAddRole","roleName","reqUpdateRole","role","reqUsers","reqDeleteUser","userId","reqAddOrUpdateUser","user","reqWeather","city","Promise","resolve","reject","url","console","log","param","err","data","lives","weather","winddirection","windpower","humidity","error"],"sources":["/Users/emmalu/Documents/fronted/workspace/react-admin_client-1/src/api/index.js"],"sourcesContent":["import ajax from \"./ajax\"\nimport jsonp from 'jsonp'\nimport { message } from \"antd\"\n\nconst BASE = '/api'\n//用户登录\nexport const reqLogin = (username, password) => ajax(BASE + '/login', { username, password }, 'POST')\n\n//获取一级/二级分类的列表\nexport const reqGetCategorys = (parentId) => ajax(BASE + '/manage/category/list', { parentId })\n//添加分类\nexport const reqAddCategory = (parentId, categoryName) => ajax(BASE + '/manage/category/add', { parentId, categoryName }, 'POST')\n//更新分类\nexport const reqUpdateCategory = (categoryId, categoryName) => ajax(BASE + '/manage/category/update', { categoryId, categoryName }, 'POST')\n\n//获取商品分页列表\nexport const reqProduct = (pageNum, pageSize) => ajax(BASE + '/manage/product/list', { pageNum, pageSize })\n\n//搜索商品分页列表(根据商品名称/描述)\n/* searchType: 搜索的类型：productName/productDesc\nsearchName: 搜索的关键字\n*/\nexport const reqSearchProduct = ({ pageNum, pageSize, searchName, searchType }) => ajax(BASE + '/manage/product/search',\n    {\n        pageNum,\n        pageSize,\n        [searchType]: searchName\n    })\n\n//获取一个分类\nexport const reqACategory = (categoryId) => ajax(BASE + '/manage/category/info', {categoryId})\n\n//更新商品的状态(上架/下架)\nexport const reqUpdateProduct = (productId, status) => ajax(BASE + '/manage/product/updateStatus', {productId, status}, 'POST')\n\n//删除图片\nexport const reqDeleteImg = (name) => ajax(BASE + '/manage/img/delete', {name}, 'POST')\n\n//添加/更新商品\nexport const reqAddOrUpdateProduct = (product) => ajax(BASE + '/manage/product/' + (product._id?'update':'add'), product, 'POST')\n\n// //更新商品\n// export const reqUpdateAProduct = (product) => ajax('/manage/product/update', product, 'POST')\n\n//获取所有角色列表\nexport const reqRoles = () => ajax(BASE + '/manage/role/list')\n\n//添加角色\nexport const reqAddRole = (roleName) => ajax(BASE + '/manage/role/add', {roleName}, 'POST')\n\n//更新角色\nexport const reqUpdateRole = (role) => ajax(BASE + '/manage/role/update', role, 'POST')\n\n//获取用户列表\nexport const reqUsers = () => ajax(BASE + '/manage/user/list')\n\n//删除用户\nexport const reqDeleteUser = (userId) => ajax(BASE + '/manage/user/delete', {userId}, 'POST')\n\n// 添加/更新用户\nexport const reqAddOrUpdateUser = (user) => ajax(BASE + '/manage/user/' + (user._id ? 'update' : 'add'), user, \"POST\")\n\n// 获取天气\nexport const reqWeather = (city) => {\n    return new Promise((resolve, reject) => {\n        // const url = `http://api.map.baidu.com/telematics/v3/weather?location=${city}&output=json&ak=3p4 9MVra6urFRGOT9s8UBWr2`\n        const url = `https://restapi.amap.com/v3/weather/weatherInfo?city=${city}&key=65e76fc0f42384fc309cc50221644787`\n        console.log('url')\n        // debugger\n        jsonp(url, {\n            param: 'callback'\n        }, (err, data) => {\n            console.log(data)\n            if (!err && data.status === \"1\") {\n                const { weather, winddirection, windpower, humidity } = data.lives[0]\n                console.log('text:', weather)\n                resolve({weather, winddirection, windpower, humidity})\n            } else {\n                message.error('获取天气信息失败!')\n            }\n\n        })\n    })\n}\n// reqWeather('北京')"],"mappings":"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"},"metadata":{},"sourceType":"module"}