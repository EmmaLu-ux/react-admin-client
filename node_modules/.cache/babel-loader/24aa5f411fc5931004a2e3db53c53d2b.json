{"ast":null,"code":"import \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\n/* 包含n个action creator函数的模块\n同步action：对象 {type: 'xxx', data: 数据值}\n异步action：函数  dispatch => {} */\n\nimport { RECEIVE_USER, SET_HEAD_TITLE, SHOW_ERROR_MSG, RESET_USER } from './action-types';\nimport { reqLogin } from '../api/index';\nimport storageUtils from '../utils/storageUtils';\n/* 设置头部标题的同步action */\nexport const setHeadTitle = headTitle => ({\n  type: SET_HEAD_TITLE,\n  data: headTitle\n});\n\n/* 接收用户信息的同步action */\nexport const receiveUser = user => ({\n  type: RECEIVE_USER,\n  user\n});\n\n/* 显示错误信息的同步action */\nexport const showErrorMsg = errorMsg => ({\n  type: SHOW_ERROR_MSG,\n  errorMsg\n});\n\n/* 退出登录的同步action */\nexport const logout = () => {\n  //1. 删除local中的user\n  storageUtils.deleteUser();\n  //2. 返回action对象\n  return {\n    type: RESET_USER\n  };\n};\n\n/* 登录的异步action */\nexport const login = (username, password) => {\n  return async dispatch => {\n    //1. 执行异步ajax请求\n    const result = await reqLogin(username, password);\n    //2.1 如果成功，分发成功的同步action\n    if (result.status === 0) {\n      const user = result.data;\n      storageUtils.saveUser(user); //保存到local中去\n      dispatch(receiveUser(user));\n    } else {\n      //2.2 如果失败，分发失败的同步aciton\n      const msg = result.msg;\n      // dispatch(showErrorMsg(msg))\n      _message.error(msg);\n    }\n  };\n};","map":{"version":3,"names":["RECEIVE_USER","SET_HEAD_TITLE","SHOW_ERROR_MSG","RESET_USER","reqLogin","storageUtils","setHeadTitle","headTitle","type","data","receiveUser","user","showErrorMsg","errorMsg","logout","deleteUser","login","username","password","dispatch","result","status","saveUser","msg","error"],"sources":["/Users/emmalu/Documents/fronted/workspace/react-admin_client-1/src/redux/actions.js"],"sourcesContent":["/* 包含n个action creator函数的模块\n同步action：对象 {type: 'xxx', data: 数据值}\n异步action：函数  dispatch => {} */\n\nimport {RECEIVE_USER, SET_HEAD_TITLE, SHOW_ERROR_MSG, RESET_USER} from './action-types'\nimport {reqLogin} from '../api/index'\nimport storageUtils from '../utils/storageUtils'\nimport { message } from 'antd'\n\n/* 设置头部标题的同步action */\nexport const setHeadTitle = (headTitle) => ({type: SET_HEAD_TITLE, data: headTitle})\n\n/* 接收用户信息的同步action */\nexport const receiveUser = (user) => ({type: RECEIVE_USER, user})\n\n/* 显示错误信息的同步action */\nexport const showErrorMsg = (errorMsg) => ({type: SHOW_ERROR_MSG, errorMsg})\n\n/* 退出登录的同步action */\nexport const logout = () => {\n    //1. 删除local中的user\n    storageUtils.deleteUser()\n    //2. 返回action对象\n    return {type: RESET_USER}\n}\n\n/* 登录的异步action */\nexport const login = (username, password) => {\n    return async dispatch => {\n        //1. 执行异步ajax请求\n        const result = await reqLogin(username, password)\n        //2.1 如果成功，分发成功的同步action\n        if(result.status === 0){\n            const user = result.data\n            storageUtils.saveUser(user) //保存到local中去\n            dispatch(receiveUser(user))\n        }else{\n        //2.2 如果失败，分发失败的同步aciton\n            const msg = result.msg\n            // dispatch(showErrorMsg(msg))\n            message.error(msg)\n        }\n    }\n}"],"mappings":";;AAAA;AACA;AACA;;AAEA,SAAQA,YAAY,EAAEC,cAAc,EAAEC,cAAc,EAAEC,UAAU,QAAO,gBAAgB;AACvF,SAAQC,QAAQ,QAAO,cAAc;AACrC,OAAOC,YAAY,MAAM,uBAAuB;AAGhD;AACA,OAAO,MAAMC,YAAY,GAAIC,SAAS,KAAM;EAACC,IAAI,EAAEP,cAAc;EAAEQ,IAAI,EAAEF;AAAS,CAAC,CAAC;;AAEpF;AACA,OAAO,MAAMG,WAAW,GAAIC,IAAI,KAAM;EAACH,IAAI,EAAER,YAAY;EAAEW;AAAI,CAAC,CAAC;;AAEjE;AACA,OAAO,MAAMC,YAAY,GAAIC,QAAQ,KAAM;EAACL,IAAI,EAAEN,cAAc;EAAEW;AAAQ,CAAC,CAAC;;AAE5E;AACA,OAAO,MAAMC,MAAM,GAAG,MAAM;EACxB;EACAT,YAAY,CAACU,UAAU,EAAE;EACzB;EACA,OAAO;IAACP,IAAI,EAAEL;EAAU,CAAC;AAC7B,CAAC;;AAED;AACA,OAAO,MAAMa,KAAK,GAAG,CAACC,QAAQ,EAAEC,QAAQ,KAAK;EACzC,OAAO,MAAMC,QAAQ,IAAI;IACrB;IACA,MAAMC,MAAM,GAAG,MAAMhB,QAAQ,CAACa,QAAQ,EAAEC,QAAQ,CAAC;IACjD;IACA,IAAGE,MAAM,CAACC,MAAM,KAAK,CAAC,EAAC;MACnB,MAAMV,IAAI,GAAGS,MAAM,CAACX,IAAI;MACxBJ,YAAY,CAACiB,QAAQ,CAACX,IAAI,CAAC,EAAC;MAC5BQ,QAAQ,CAACT,WAAW,CAACC,IAAI,CAAC,CAAC;IAC/B,CAAC,MAAI;MACL;MACI,MAAMY,GAAG,GAAGH,MAAM,CAACG,GAAG;MACtB;MACA,SAAQC,KAAK,CAACD,GAAG,CAAC;IACtB;EACJ,CAAC;AACL,CAAC"},"metadata":{},"sourceType":"module"}